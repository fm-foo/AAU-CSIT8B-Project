map BasicMap {
        background: colour { hex: #222222; };
        shape: box {
                height: 10; width: 10;
        };
};

entity Apple {

    create: function() {
        // do nothing
    }

    act: function() {
        // do nothing
    }

    destroy: function() {
        // create new apple?
    }
}

entity Player {
    create: function() {
        this.length = 3;
    }

    act: function() {
        // receive input take action
        var key = GetKeyPress();
        var position = map.getPosition(this);
        var newPosition;
        if (key == "left")
        {
            newPosition = position + (1, 0);
        } else if (key == "up")
        {
            newPosition = position + (0, 1);
        } else if (key == "down") {
            newPosition = position + (0, -1);
        } else if (key == "right) {
            newPosition = position + (-1, 0);
        } else {
            // don't do anything I guess
            newPosition = position;
        }
        map.move(this, newPosition);
        // handle placing a snakebody where you left
        var body = new SnakeBody(this.length);
        map.place(body, position);
        // handle collision
        var entities = map.getAt(newPosition);
        foreach (var entity in entities)
        {
            if (entity.getType() == typeof(Apple))
            {
                entity.kill();
                this.length = length + 1;
            }
            if (entity.getType() == typeof(SnakeBody))
            {
                // you lose
            }
        }
    }

    destroy: function() {
        // game over? maybe don't
        // even do anything
    }

}

entity SnakeBody {
    create: function(int life) {
        this.life = life;
        // how long it should stay alive for
    }

    act: function() {
        this.life = this.life - 1;
        if (this.life <= 0)
        {
            this.kill();
        }
    }

    destroy: function() {

    }
}

game Snake {
    initialize: function() {
        setMap(new BasicMap());
        var player = new Player();
        map.place(player, (0, 0));
        var apple = new Apple();
        map.place(apple, (3, 3));
    }
}